<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Муринет</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;margin:0;text-align:center;background:white}

/* логотип */
.logo{font-size:60px;margin-top:120px;font-weight:bold}
.logo .m{color:red}.logo .t{color:black}

/* поиск */
.search-box{margin-top:20px}
input{
width:60%;max-width:600px;padding:15px;font-size:18px;
border-radius:30px;border:1px solid #ccc;
}

/* подсказки */
.suggestions{
position:absolute;background:white;width:60%;max-width:600px;
left:50%;transform:translateX(-50%);
border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.1);
display:none;text-align:left
}
.suggest-item{padding:12px;cursor:pointer}
.suggest-item:hover{background:#f2f2f2}

/* профиль */
.profile{
position:fixed;top:15px;right:20px;display:flex;gap:10px;cursor:pointer;align-items:center
}
.profile img{width:40px;height:40px;border-radius:50%}

.profile-menu{
display:none;position:fixed;top:60px;right:20px;background:white;padding:15px;border-radius:12px;
box-shadow:0 0 15px rgba(0,0,0,0.2)
}

.edit{
display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
background:white;padding:25px;border-radius:12px
}

.history{
display:none;position:fixed;top:120px;right:20px;background:white;padding:15px;border-radius:12px;
max-width:250px;box-shadow:0 0 15px rgba(0,0,0,0.2)
}
.history p{cursor:pointer;margin:5px 0}

/* тренды */
.trends{margin-top:60px;color:#555}
.trends p{cursor:pointer}
</style>
</head>

<body>

<!-- профиль -->
<div class="profile" onclick="toggleMenu()">
<img id="avatar" src="https://i.imgur.com/4YQZ4qT.jpg">
<span id="name">Пользователь</span>
</div>

<div id="profileMenu" class="profile-menu">
<p><b id="menuName">Пользователь</b></p>
<button onclick="editProfile()">Изменить профиль</button>
<button onclick="showHistory()">История поиска</button>
</div>

<div id="editProfile" class="edit">
<h3>Профиль</h3>
<input id="newName" placeholder="Имя">
<input id="newAvatar" placeholder="Ссылка на аватар">
<button onclick="saveProfile()">Сохранить</button>
</div>

<div id="historyBox" class="history"></div>

<!-- логотип -->
<div class="logo">
<span class="m">М</span><span class="t">уринет</span>
</div>

<!-- поиск -->
<div class="search-box">
<input id="searchInput" placeholder="Найти в Муринете">
<div id="suggestions" class="suggestions"></div>
</div>

<!-- тренды -->
<div class="trends">
<h3>Тренды</h3>
<p onclick="goSearch('меллстрой')">Меллстрой</p>
<p onclick="goSearch('фог мурино')">Фог Мурино</p>
<p onclick="goSearch('переводчик')">Переводчик</p>
</div>

<script>

// профиль
let avatar=document.getElementById("avatar");
let name=document.getElementById("name");
let menu=document.getElementById("profileMenu");

function toggleMenu(){menu.style.display=menu.style.display=="block"?"none":"block"}
function editProfile(){document.getElementById("editProfile").style.display="block"}

function saveProfile(){
let newName=document.getElementById("newName").value;
let newAvatar=document.getElementById("newAvatar").value;

if(newName){
localStorage.setItem("murinet_name",newName);
name.innerText=newName;menuName.innerText=newName;
}
if(newAvatar){
localStorage.setItem("murinet_avatar",newAvatar);
avatar.src=newAvatar;
}
editProfile().style="none";
}

window.onload=function(){
let savedName=localStorage.getItem("murinet_name");
let savedAvatar=localStorage.getItem("murinet_avatar");
if(savedName){name.innerText=savedName;menuName.innerText=savedName}
if(savedAvatar){avatar.src=savedAvatar}
}

// история
function saveHistory(q){
let h=JSON.parse(localStorage.getItem("history")||"[]");
h.unshift(q);
localStorage.setItem("history",JSON.stringify(h.slice(0,10)));
}

function showHistory(){
let box=document.getElementById("historyBox");
let history=JSON.parse(localStorage.getItem("history")||"[]");
box.innerHTML="<b>История поиска</b>";
history.forEach(q=>{
box.innerHTML+=`<p onclick="goSearch('${q}')">${q}</p>`;
});
box.style.display="block";
}

// подсказки
const suggestions=["муринский переводчик","перевод","мытищинский переводчик","фог мурино","мурино","меллстрой"];
const input=document.getElementById("searchInput");
const box=document.getElementById("suggestions");

input.addEventListener("input",()=>{
let value=input.value.toLowerCase();
box.innerHTML="";
if(!value){box.style.display="none";return;}

suggestions.filter(s=>s.includes(value)).forEach(s=>{
let div=document.createElement("div");
div.className="suggest-item";
div.innerText=s;
div.onclick=()=>goSearch(s);
box.appendChild(div);
});
box.style.display="block";
});

// enter
input.addEventListener("keypress",e=>{
if(e.key==="Enter") goSearch(input.value);
});

function goSearch(q){
if(!q) return;
saveHistory(q);
window.location.href="results.html?q="+encodeURIComponent(q);
}

</script>
</body>
</html>
